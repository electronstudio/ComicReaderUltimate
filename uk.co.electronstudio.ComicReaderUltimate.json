{
  "id" : "uk.co.electronstudio.ComicReaderUltimate",
  "branch" : "1.0",
  "runtime" : "org.freedesktop.Platform",
  "runtime-version" : "21.08",
  "sdk" : "org.freedesktop.Sdk",
  "sdk-extensions" : [ "org.freedesktop.Sdk.Extension.openjdk" ],
  "modules" : [ {
    "name" : "openjdk",
    "buildsystem" : "simple",
    "build-commands" : [ "/usr/lib/sdk/openjdk/install.sh" ]
  }, {
    "name" : "ComicReaderUltimate",
    "buildsystem" : "simple",
    "build-options" :
    {
      "build-args": [ "--share=network" ],
      "env":
      {
        "JAVA_HOME": "/usr/lib/sdk/openjdk/jvm/openjdk-16"
      }
    }
  ,
    "build-commands" : [
      "echo $JAVA_HOME",
      "./gradlew dist",
      "install -D desktop/build/libs/desktop-1.0.jar /app/bin/cru.jar",
      "install -D cru.sh /app/bin/cru.sh",
      "install -D icon.png /app/share/icons/hicolor/128x128/apps/uk.co.electronstudio.ComicReaderUltimate.png",
      "install -D cru.desktop /app/share/applications/uk.co.electronstudio.ComicReaderUltimate.desktop"
    ],
    "sources" : [
      {
        "type": "git",
        "branch": "master",
        "url": "https://github.com/electronstudio/ComicReaderUltimate.git"
      },
      {
        "type": "script",
        "dest-filename": "cru.sh",
        "commands": [
          "java -Xms1G -Xmx4G -XX:+UseZGC -XX:MaxGCPauseMillis=10 -jar /app/bin/cru.jar \"$@\""
        ]
      },
      {
        "type": "file",
        "path": "cru.desktop"
      },
      {
        "type": "file",
        "path": "icon.png"
      }
    ]
  } ],
  "finish-args" : [
    "--env=PATH=/app/jre/bin:/usr/bin",
    "--socket=x11",
    "--device=dri",
    "--socket=pulseaudio",
    "--filesystem=host"
  ],
  "command" : "/app/bin/cru.sh"
}
